# KRAI Database Schema Documentation
================================================================================

**Zuletzt aktualisiert:** 17.10.2025 um 10:35 Uhr

**Hinweis:** Diese Dokumentation wird automatisch generiert.

## Table of Contents

- [krai_agent](#krai-agent)
- [krai_config](#krai-config)
- [krai_content](#krai-content)
- [krai_core](#krai-core)
- [krai_integrations](#krai-integrations)
- [krai_intelligence](#krai-intelligence)
- [krai_ml](#krai-ml)
- [krai_parts](#krai-parts)
- [krai_service](#krai-service)
- [krai_system](#krai-system)
- [krai_users](#krai-users)

---

## krai_agent

### krai_agent.memory

| Column | Type | Nullable | Default |
|--------|------|----------|---------|
| *(columns require direct DB access)* | - | - | - |

### krai_agent.message

| Column | Type | Nullable | Default |
|--------|------|----------|---------|
| *(columns require direct DB access)* | - | - | - |

## krai_config

### krai_config.competition_analysis

| Column | Type | Nullable | Default |
|--------|------|----------|---------|
| *(columns require direct DB access)* | - | - | - |

### krai_config.option_groups

| Column | Type | Nullable | Default |
|--------|------|----------|---------|
| *(columns require direct DB access)* | - | - | - |

### krai_config.product_compatibility

| Column | Type | Nullable | Default |
|--------|------|----------|---------|
| *(columns require direct DB access)* | - | - | - |

### krai_config.product_features

| Column | Type | Nullable | Default |
|--------|------|----------|---------|
| *(columns require direct DB access)* | - | - | - |

## krai_content

### krai_content.images

| Column | Type | Nullable | Default |
|--------|------|----------|---------|
| *(columns require direct DB access)* | - | - | - |

### krai_content.links

| Column | Type | Nullable | Default |
|--------|------|----------|---------|
| *(columns require direct DB access)* | - | - | - |

### krai_content.print_defects

| Column | Type | Nullable | Default |
|--------|------|----------|---------|
| *(columns require direct DB access)* | - | - | - |

### krai_content.video_products

| Column | Type | Nullable | Default |
|--------|------|----------|---------|
| *(columns require direct DB access)* | - | - | - |

### krai_content.videos

| Column | Type | Nullable | Default |
|--------|------|----------|---------|
| *(columns require direct DB access)* | - | - | - |

## krai_core

### krai_core.document_products

| Column | Type | Nullable | Default |
|--------|------|----------|---------|
| *(columns require direct DB access)* | - | - | - |

### krai_core.document_relationships

| Column | Type | Nullable | Default |
|--------|------|----------|---------|
| *(columns require direct DB access)* | - | - | - |

### krai_core.documents

| Column | Type | Nullable | Default |
|--------|------|----------|---------|
| *(columns require direct DB access)* | - | - | - |

### krai_core.manufacturers

| Column | Type | Nullable | Default |
|--------|------|----------|---------|
| *(columns require direct DB access)* | - | - | - |

### krai_core.oem_relationships

| Column | Type | Nullable | Default |
|--------|------|----------|---------|
| *(columns require direct DB access)* | - | - | - |

### krai_core.product_accessories

| Column | Type | Nullable | Default |
|--------|------|----------|---------|
| *(columns require direct DB access)* | - | - | - |

### krai_core.product_configurations

| Column | Type | Nullable | Default |
|--------|------|----------|---------|
| *(columns require direct DB access)* | - | - | - |

### krai_core.product_series

| Column | Type | Nullable | Default |
|--------|------|----------|---------|
| *(columns require direct DB access)* | - | - | - |

### krai_core.products

| Column | Type | Nullable | Default |
|--------|------|----------|---------|
| *(columns require direct DB access)* | - | - | - |

## krai_integrations

### krai_integrations.api_keys

| Column | Type | Nullable | Default |
|--------|------|----------|---------|
| *(columns require direct DB access)* | - | - | - |

### krai_integrations.webhook_logs

| Column | Type | Nullable | Default |
|--------|------|----------|---------|
| *(columns require direct DB access)* | - | - | - |

## krai_intelligence

### krai_intelligence.chunks

| Column | Type | Nullable | Default |
|--------|------|----------|---------|
| *(columns require direct DB access)* | - | - | - |

### krai_intelligence.error_code_images

| Column | Type | Nullable | Default |
|--------|------|----------|---------|
| *(columns require direct DB access)* | - | - | - |

### krai_intelligence.error_code_parts

| Column | Type | Nullable | Default |
|--------|------|----------|---------|
| *(columns require direct DB access)* | - | - | - |

### krai_intelligence.error_codes

| Column | Type | Nullable | Default |
|--------|------|----------|---------|
| *(columns require direct DB access)* | - | - | - |

### krai_intelligence.feedback

| Column | Type | Nullable | Default |
|--------|------|----------|---------|
| *(columns require direct DB access)* | - | - | - |

### krai_intelligence.product_research_cache

| Column | Type | Nullable | Default |
|--------|------|----------|---------|
| *(columns require direct DB access)* | - | - | - |

### krai_intelligence.search_analytics

| Column | Type | Nullable | Default |
|--------|------|----------|---------|
| *(columns require direct DB access)* | - | - | - |

### krai_intelligence.session_context

| Column | Type | Nullable | Default |
|--------|------|----------|---------|
| *(columns require direct DB access)* | - | - | - |

### krai_intelligence.tool_usage

| Column | Type | Nullable | Default |
|--------|------|----------|---------|
| *(columns require direct DB access)* | - | - | - |

## krai_ml

### krai_ml.model_performance_history

| Column | Type | Nullable | Default |
|--------|------|----------|---------|
| *(columns require direct DB access)* | - | - | - |

### krai_ml.model_registry

| Column | Type | Nullable | Default |
|--------|------|----------|---------|
| *(columns require direct DB access)* | - | - | - |

## krai_parts

### krai_parts.inventory_levels

| Column | Type | Nullable | Default |
|--------|------|----------|---------|
| *(columns require direct DB access)* | - | - | - |

### krai_parts.parts_catalog

| Column | Type | Nullable | Default |
|--------|------|----------|---------|
| *(columns require direct DB access)* | - | - | - |

## krai_service

### krai_service.service_calls

| Column | Type | Nullable | Default |
|--------|------|----------|---------|
| *(columns require direct DB access)* | - | - | - |

### krai_service.service_history

| Column | Type | Nullable | Default |
|--------|------|----------|---------|
| *(columns require direct DB access)* | - | - | - |

### krai_service.technicians

| Column | Type | Nullable | Default |
|--------|------|----------|---------|
| *(columns require direct DB access)* | - | - | - |

## krai_system

### krai_system.audit_log

| Column | Type | Nullable | Default |
|--------|------|----------|---------|
| *(columns require direct DB access)* | - | - | - |

### krai_system.health_checks

| Column | Type | Nullable | Default |
|--------|------|----------|---------|
| *(columns require direct DB access)* | - | - | - |

### krai_system.processing_queue

| Column | Type | Nullable | Default |
|--------|------|----------|---------|
| *(columns require direct DB access)* | - | - | - |

### krai_system.stage_tracking

| Column | Type | Nullable | Default |
|--------|------|----------|---------|
| *(columns require direct DB access)* | - | - | - |

### krai_system.system_metrics

| Column | Type | Nullable | Default |
|--------|------|----------|---------|
| *(columns require direct DB access)* | - | - | - |

## krai_users

### krai_users.user_sessions

| Column | Type | Nullable | Default |
|--------|------|----------|---------|
| *(columns require direct DB access)* | - | - | - |

### krai_users.users

| Column | Type | Nullable | Default |
|--------|------|----------|---------|
| *(columns require direct DB access)* | - | - | - |

---

## Public Views (vw_*)

All views use `vw_` prefix and point to tables in krai_* schemas:

- `vw_agent_memory → krai_agent.memory`
- `vw_audit_log → krai_system.audit_log`
- `vw_chunks → krai_intelligence.chunks (includes embeddings column!)`
- `vw_document_products → krai_core.document_products`
- `vw_documents → krai_core.documents`
- `vw_embeddings → (ALIAS for vw_chunks - embeddings are IN chunks table!)`
- `vw_error_codes → krai_intelligence.error_codes`
- `vw_images → krai_content.images`
- `vw_intelligence_chunks → krai_intelligence.chunks`
- `vw_links → krai_content.links`
- `vw_manufacturers → krai_core.manufacturers`
- `vw_parts → krai_parts.parts_catalog`
- `vw_processing_queue → krai_system.processing_queue`
- `vw_product_series → krai_core.product_series`
- `vw_products → krai_core.products`
- `vw_search_analytics → krai_intelligence.search_analytics`
- `vw_system_metrics → krai_system.system_metrics`
- `vw_video_products → krai_content.video_products`
- `vw_videos → krai_content.videos`
- `vw_webhook_logs → krai_integrations.webhook_logs`

---

## Important Notes

### Embeddings Storage
- **Embeddings are stored IN `krai_intelligence.chunks` table as a column!**
- There is NO separate `krai_embeddings` schema
- Column: `embedding` (type: `vector(768)`)

### View Naming Convention
- All views use `vw_` prefix
- Views are in `public` schema
- Tables are in `krai_*` schemas
